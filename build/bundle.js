!function(e){var t={};function r(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(i,a,function(t){return e[t]}.bind(null,a));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t){var r,i=this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i};if(void 0===(r="undefined"!=typeof WebKitMutationObserver?WebKitMutationObserver:MutationObserver))throw console.error("DOM Mutation Observers are required."),console.error("https://developer.mozilla.org/en-US/docs/DOM/MutationObserver"),Error("DOM Mutation Observers are required");var a,n=function(){function e(){this.nodes=[],this.values=[]}return e.prototype.isIndex=function(e){return+e==e>>>0},e.prototype.nodeId=function(t){var r=t[e.ID_PROP];return r||(r=t[e.ID_PROP]=e.nextId_++),r},e.prototype.set=function(e,t){var r=this.nodeId(e);this.nodes[r]=e,this.values[r]=t},e.prototype.get=function(e){var t=this.nodeId(e);return this.values[t]},e.prototype.has=function(e){return this.nodeId(e)in this.nodes},e.prototype.delete=function(e){var t=this.nodeId(e);delete this.nodes[t],this.values[t]=void 0},e.prototype.keys=function(){var e=[];for(var t in this.nodes)this.isIndex(t)&&e.push(this.nodes[t]);return e},e.ID_PROP="__mutation_summary_node_map_id__",e.nextId_=1,e}();!function(e){e[e.STAYED_OUT=0]="STAYED_OUT",e[e.ENTERED=1]="ENTERED",e[e.STAYED_IN=2]="STAYED_IN",e[e.REPARENTED=3]="REPARENTED",e[e.REORDERED=4]="REORDERED",e[e.EXITED=5]="EXITED"}(a||(a={}));var o=function(){function e(e,t,r,i,a,n,o,s){void 0===t&&(t=!1),void 0===r&&(r=!1),void 0===i&&(i=!1),void 0===a&&(a=null),void 0===n&&(n=!1),void 0===o&&(o=null),void 0===s&&(s=null),this.node=e,this.childList=t,this.attributes=r,this.characterData=i,this.oldParentNode=a,this.added=n,this.attributeOldValues=o,this.characterDataOldValue=s,this.isCaseInsensitive=this.node.nodeType===Node.ELEMENT_NODE&&this.node instanceof HTMLElement&&this.node.ownerDocument instanceof HTMLDocument}return e.prototype.getAttributeOldValue=function(e){if(this.attributeOldValues)return this.isCaseInsensitive&&(e=e.toLowerCase()),this.attributeOldValues[e]},e.prototype.getAttributeNamesMutated=function(){var e=[];if(!this.attributeOldValues)return e;for(var t in this.attributeOldValues)e.push(t);return e},e.prototype.attributeMutated=function(e,t){this.attributes=!0,this.attributeOldValues=this.attributeOldValues||{},e in this.attributeOldValues||(this.attributeOldValues[e]=t)},e.prototype.characterDataMutated=function(e){this.characterData||(this.characterData=!0,this.characterDataOldValue=e)},e.prototype.removedFromParent=function(e){this.childList=!0,this.added||this.oldParentNode?this.added=!1:this.oldParentNode=e},e.prototype.insertedIntoParent=function(){this.childList=!0,this.added=!0},e.prototype.getOldParent=function(){if(this.childList){if(this.oldParentNode)return this.oldParentNode;if(this.added)return null}return this.node.parentNode},e}(),s=function(){this.added=new n,this.removed=new n,this.maybeMoved=new n,this.oldPrevious=new n,this.moved=void 0},h=function(e){function t(t,r){e.call(this),this.rootNode=t,this.reachableCache=void 0,this.wasReachableCache=void 0,this.anyParentsChanged=!1,this.anyAttributesChanged=!1,this.anyCharacterDataChanged=!1;for(var i=0;i<r.length;i++){var a=r[i];switch(a.type){case"childList":this.anyParentsChanged=!0;for(var n=0;n<a.removedNodes.length;n++){var o=a.removedNodes[n];this.getChange(o).removedFromParent(a.target)}for(n=0;n<a.addedNodes.length;n++){o=a.addedNodes[n];this.getChange(o).insertedIntoParent()}break;case"attributes":this.anyAttributesChanged=!0,this.getChange(a.target).attributeMutated(a.attributeName,a.oldValue);break;case"characterData":this.anyCharacterDataChanged=!0,this.getChange(a.target).characterDataMutated(a.oldValue)}}}return i(t,e),t.prototype.getChange=function(e){var t=this.get(e);return t||(t=new o(e),this.set(e,t)),t},t.prototype.getOldParent=function(e){var t=this.get(e);return t?t.getOldParent():e.parentNode},t.prototype.getIsReachable=function(e){if(e===this.rootNode)return!0;if(!e)return!1;this.reachableCache=this.reachableCache||new n;var t=this.reachableCache.get(e);return void 0===t&&(t=this.getIsReachable(e.parentNode),this.reachableCache.set(e,t)),t},t.prototype.getWasReachable=function(e){if(e===this.rootNode)return!0;if(!e)return!1;this.wasReachableCache=this.wasReachableCache||new n;var t=this.wasReachableCache.get(e);return void 0===t&&(t=this.getWasReachable(this.getOldParent(e)),this.wasReachableCache.set(e,t)),t},t.prototype.reachabilityChange=function(e){return this.getIsReachable(e)?this.getWasReachable(e)?a.STAYED_IN:a.ENTERED:this.getWasReachable(e)?a.EXITED:a.STAYED_OUT},t}(n),d=function(){function e(e,t,r,i,a){this.rootNode=e,this.mutations=t,this.selectors=r,this.calcReordered=i,this.calcOldPreviousSibling=a,this.treeChanges=new h(e,t),this.entered=[],this.exited=[],this.stayedIn=new n,this.visited=new n,this.childListChangeMap=void 0,this.characterDataOnly=void 0,this.matchCache=void 0,this.processMutations()}return e.prototype.processMutations=function(){if(this.treeChanges.anyParentsChanged||this.treeChanges.anyAttributesChanged)for(var e=this.treeChanges.keys(),t=0;t<e.length;t++)this.visitNode(e[t],void 0)},e.prototype.visitNode=function(e,t){if(!this.visited.has(e)){this.visited.set(e,!0);var r=this.treeChanges.get(e),i=t;if((r&&r.childList||null==i)&&(i=this.treeChanges.reachabilityChange(e)),i!==a.STAYED_OUT){if(this.matchabilityChange(e),i===a.ENTERED)this.entered.push(e);else if(i===a.EXITED)this.exited.push(e),this.ensureHasOldPreviousSiblingIfNeeded(e);else if(i===a.STAYED_IN){var n=a.STAYED_IN;r&&r.childList&&(r.oldParentNode!==e.parentNode?(n=a.REPARENTED,this.ensureHasOldPreviousSiblingIfNeeded(e)):this.calcReordered&&this.wasReordered(e)&&(n=a.REORDERED)),this.stayedIn.set(e,n)}if(i!==a.STAYED_IN)for(var o=e.firstChild;o;o=o.nextSibling)this.visitNode(o,i)}}},e.prototype.ensureHasOldPreviousSiblingIfNeeded=function(e){if(this.calcOldPreviousSibling){this.processChildlistChanges();var t=e.parentNode,r=this.treeChanges.get(e);r&&r.oldParentNode&&(t=r.oldParentNode);var i=this.childListChangeMap.get(t);i||(i=new s,this.childListChangeMap.set(t,i)),i.oldPrevious.has(e)||i.oldPrevious.set(e,e.previousSibling)}},e.prototype.getChanged=function(e,t,r){this.selectors=t,this.characterDataOnly=r;for(var i=0;i<this.entered.length;i++){var n=this.entered[i];(h=this.matchabilityChange(n))!==a.ENTERED&&h!==a.STAYED_IN||e.added.push(n)}var o=this.stayedIn.keys();for(i=0;i<o.length;i++){n=o[i];if((h=this.matchabilityChange(n))===a.ENTERED)e.added.push(n);else if(h===a.EXITED)e.removed.push(n);else if(h===a.STAYED_IN&&(e.reparented||e.reordered)){var s=this.stayedIn.get(n);e.reparented&&s===a.REPARENTED?e.reparented.push(n):e.reordered&&s===a.REORDERED&&e.reordered.push(n)}}for(i=0;i<this.exited.length;i++){var h;n=this.exited[i];(h=this.matchabilityChange(n))!==a.EXITED&&h!==a.STAYED_IN||e.removed.push(n)}},e.prototype.getOldParentNode=function(e){var t=this.treeChanges.get(e);if(t&&t.childList)return t.oldParentNode?t.oldParentNode:null;var r=this.treeChanges.reachabilityChange(e);if(r===a.STAYED_OUT||r===a.ENTERED)throw Error("getOldParentNode requested on invalid node.");return e.parentNode},e.prototype.getOldPreviousSibling=function(e){var t=e.parentNode,r=this.treeChanges.get(e);r&&r.oldParentNode&&(t=r.oldParentNode);var i=this.childListChangeMap.get(t);if(!i)throw Error("getOldPreviousSibling requested on invalid node.");return i.oldPrevious.get(e)},e.prototype.getOldAttribute=function(e,t){var r=this.treeChanges.get(e);if(!r||!r.attributes)throw Error("getOldAttribute requested on invalid node.");var i=r.getAttributeOldValue(t);if(void 0===i)throw Error("getOldAttribute requested for unchanged attribute name.");return i},e.prototype.attributeChangedNodes=function(e){if(!this.treeChanges.anyAttributesChanged)return{};var t,r;if(e){t={},r={};for(var i=0;i<e.length;i++){t[u=e[i]]=!0,r[u.toLowerCase()]=u}}var n={},o=this.treeChanges.keys();for(i=0;i<o.length;i++){var s=o[i],h=this.treeChanges.get(s);if(h.attributes&&(a.STAYED_IN===this.treeChanges.reachabilityChange(s)&&a.STAYED_IN===this.matchabilityChange(s)))for(var d=s,c=h.getAttributeNamesMutated(),l=0;l<c.length;l++){var u=c[l];if(!t||t[u]||h.isCaseInsensitive&&r[u])h.getAttributeOldValue(u)!==d.getAttribute(u)&&(r&&h.isCaseInsensitive&&(u=r[u]),n[u]=n[u]||[],n[u].push(d))}}return n},e.prototype.getOldCharacterData=function(e){var t=this.treeChanges.get(e);if(!t||!t.characterData)throw Error("getOldCharacterData requested on invalid node.");return t.characterDataOldValue},e.prototype.getCharacterDataChanged=function(){if(!this.treeChanges.anyCharacterDataChanged)return[];for(var e=this.treeChanges.keys(),t=[],r=0;r<e.length;r++){var i=e[r];if(a.STAYED_IN===this.treeChanges.reachabilityChange(i)){var n=this.treeChanges.get(i);n.characterData&&i.textContent!=n.characterDataOldValue&&t.push(i)}}return t},e.prototype.computeMatchabilityChange=function(e,t){this.matchCache||(this.matchCache=[]),this.matchCache[e.uid]||(this.matchCache[e.uid]=new n);var r=this.matchCache[e.uid],i=r.get(t);return void 0===i&&(i=e.matchabilityChange(t,this.treeChanges.get(t)),r.set(t,i)),i},e.prototype.matchabilityChange=function(e){var t=this;if(this.characterDataOnly)switch(e.nodeType){case Node.COMMENT_NODE:case Node.TEXT_NODE:return a.STAYED_IN;default:return a.STAYED_OUT}if(!this.selectors)return a.STAYED_IN;if(e.nodeType!==Node.ELEMENT_NODE)return a.STAYED_OUT;for(var r=e,i=this.selectors.map((function(e){return t.computeMatchabilityChange(e,r)})),n=a.STAYED_OUT,o=0;n!==a.STAYED_IN&&o<i.length;){switch(i[o]){case a.STAYED_IN:n=a.STAYED_IN;break;case a.ENTERED:n=n===a.EXITED?a.STAYED_IN:a.ENTERED;break;case a.EXITED:n=n===a.ENTERED?a.STAYED_IN:a.EXITED}o++}return n},e.prototype.getChildlistChange=function(e){var t=this.childListChangeMap.get(e);return t||(t=new s,this.childListChangeMap.set(e,t)),t},e.prototype.processChildlistChanges=function(){if(!this.childListChangeMap){this.childListChangeMap=new n;for(var e=0;e<this.mutations.length;e++){var t=this.mutations[e];if("childList"==t.type&&(this.treeChanges.reachabilityChange(t.target)===a.STAYED_IN||this.calcOldPreviousSibling)){for(var r=this.getChildlistChange(t.target),i=t.previousSibling,o=0;o<t.removedNodes.length;o++){h(s=t.removedNodes[o],i),r.added.has(s)?r.added.delete(s):(r.removed.set(s,!0),r.maybeMoved.delete(s)),i=s}h(t.nextSibling,i);for(o=0;o<t.addedNodes.length;o++){var s=t.addedNodes[o];r.removed.has(s)?(r.removed.delete(s),r.maybeMoved.set(s,!0)):r.added.set(s,!0)}}function h(e,t){!e||r.oldPrevious.has(e)||r.added.has(e)||r.maybeMoved.has(e)||t&&(r.added.has(t)||r.maybeMoved.has(t))||r.oldPrevious.set(e,t)}}}},e.prototype.wasReordered=function(e){if(!this.treeChanges.anyParentsChanged)return!1;this.processChildlistChanges();var t=e.parentNode,r=this.treeChanges.get(e);r&&r.oldParentNode&&(t=r.oldParentNode);var i=this.childListChangeMap.get(t);if(!i)return!1;if(i.moved)return i.moved.get(e);i.moved=new n;var a=new n;function o(e){if(!e)return!1;if(!i.maybeMoved.has(e))return!1;var t=i.moved.get(e);return void 0!==t||(a.has(e)?t=!0:(a.set(e,!0),t=function(e){if(h.has(e))return h.get(e);var t=e.previousSibling;for(;t&&(i.added.has(t)||o(t));)t=t.previousSibling;return h.set(e,t),t}(e)!==function e(t){var r=s.get(t);if(void 0!==r)return r;r=i.oldPrevious.get(t);for(;r&&(i.removed.has(r)||o(r));)r=e(r);void 0===r&&(r=t.previousSibling);return s.set(t,r),r}(e)),a.has(e)?(a.delete(e),i.moved.set(e,t)):t=i.moved.get(e)),t}var s=new n;var h=new n;return i.maybeMoved.keys().forEach(o),i.moved.get(e)},e}(),c=function(){function e(e,t){var r=this;if(this.projection=e,this.added=[],this.removed=[],this.reparented=t.all||t.element||t.characterData?[]:void 0,this.reordered=t.all?[]:void 0,e.getChanged(this,t.elementFilter,t.characterData),t.all||t.attribute||t.attributeList){var i=t.attribute?[t.attribute]:t.attributeList,a=e.attributeChangedNodes(i);t.attribute?this.valueChanged=a[t.attribute]||[]:(this.attributeChanged=a,t.attributeList&&t.attributeList.forEach((function(e){r.attributeChanged.hasOwnProperty(e)||(r.attributeChanged[e]=[])})))}if(t.all||t.characterData){var n=e.getCharacterDataChanged();t.characterData?this.valueChanged=n:this.characterDataChanged=n}this.reordered&&(this.getOldPreviousSibling=e.getOldPreviousSibling.bind(e))}return e.prototype.getOldParentNode=function(e){return this.projection.getOldParentNode(e)},e.prototype.getOldAttribute=function(e,t){return this.projection.getOldAttribute(e,t)},e.prototype.getOldCharacterData=function(e){return this.projection.getOldCharacterData(e)},e.prototype.getOldPreviousSibling=function(e){return this.projection.getOldPreviousSibling(e)},e}(),l=/[a-zA-Z_]+/,u=/[a-zA-Z0-9_\-]+/;function f(e){return'"'+e.replace(/"/,'\\"')+'"'}var p=function(){function e(){}return e.prototype.matches=function(e){if(null===e)return!1;if(void 0===this.attrValue)return!0;if(!this.contains)return this.attrValue==e;for(var t=e.split(" "),r=0;r<t.length;r++)if(this.attrValue===t[r])return!0;return!1},e.prototype.toString=function(){return"class"===this.attrName&&this.contains?"."+this.attrValue:"id"!==this.attrName||this.contains?this.contains?"["+this.attrName+"~="+f(this.attrValue)+"]":"attrValue"in this?"["+this.attrName+"="+f(this.attrValue)+"]":"["+this.attrName+"]":"#"+this.attrValue},e}(),g=function(){function e(){this.uid=e.nextUid++,this.qualifiers=[]}var t;return Object.defineProperty(e.prototype,"caseInsensitiveTagName",{get:function(){return this.tagName.toUpperCase()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectorString",{get:function(){return this.tagName+this.qualifiers.join("")},enumerable:!0,configurable:!0}),e.prototype.isMatching=function(t){return t[e.matchesSelector](this.selectorString)},e.prototype.wasMatching=function(e,t,r){if(!t||!t.attributes)return r;var i=t.isCaseInsensitive?this.caseInsensitiveTagName:this.tagName;if("*"!==i&&i!==e.tagName)return!1;for(var a=[],n=!1,o=0;o<this.qualifiers.length;o++){var s=this.qualifiers[o],h=t.getAttributeOldValue(s.attrName);a.push(h),n=n||void 0!==h}if(!n)return r;for(o=0;o<this.qualifiers.length;o++){s=this.qualifiers[o];if(void 0===(h=a[o])&&(h=e.getAttribute(s.attrName)),!s.matches(h))return!1}return!0},e.prototype.matchabilityChange=function(e,t){var r=this.isMatching(e);return r?this.wasMatching(e,t,r)?a.STAYED_IN:a.ENTERED:this.wasMatching(e,t,r)?a.EXITED:a.STAYED_OUT},e.parseSelectors=function(t){var r,i,a=[];function n(){r&&(i&&(r.qualifiers.push(i),i=void 0),a.push(r)),r=new e}function o(){i&&r.qualifiers.push(i),i=new p}for(var s,h=/\s/,d="Invalid or unsupported selector syntax.",c=1,f=0;f<t.length;){var g=t[f++];switch(c){case 1:if(g.match(l)){n(),r.tagName=g,c=2;break}if("*"==g){n(),r.tagName="*",c=3;break}if("."==g){n(),o(),r.tagName="*",i.attrName="class",i.contains=!0,c=4;break}if("#"==g){n(),o(),r.tagName="*",i.attrName="id",c=4;break}if("["==g){n(),o(),r.tagName="*",i.attrName="",c=6;break}if(g.match(h))break;throw Error(d);case 2:if(g.match(u)){r.tagName+=g;break}if("."==g){o(),i.attrName="class",i.contains=!0,c=4;break}if("#"==g){o(),i.attrName="id",c=4;break}if("["==g){o(),i.attrName="",c=6;break}if(g.match(h)){c=14;break}if(","==g){c=1;break}throw Error(d);case 3:if("."==g){o(),i.attrName="class",i.contains=!0,c=4;break}if("#"==g){o(),i.attrName="id",c=4;break}if("["==g){o(),i.attrName="",c=6;break}if(g.match(h)){c=14;break}if(","==g){c=1;break}throw Error(d);case 4:if(g.match(l)){i.attrValue=g,c=5;break}throw Error(d);case 5:if(g.match(u)){i.attrValue+=g;break}if("."==g){o(),i.attrName="class",i.contains=!0,c=4;break}if("#"==g){o(),i.attrName="id",c=4;break}if("["==g){o(),c=6;break}if(g.match(h)){c=14;break}if(","==g){c=1;break}throw Error(d);case 6:if(g.match(l)){i.attrName=g,c=7;break}if(g.match(h))break;throw Error(d);case 7:if(g.match(u)){i.attrName+=g;break}if(g.match(h)){c=8;break}if("~"==g){i.contains=!0,c=9;break}if("="==g){i.attrValue="",c=11;break}if("]"==g){c=3;break}throw Error(d);case 8:if("~"==g){i.contains=!0,c=9;break}if("="==g){i.attrValue="",c=11;break}if("]"==g){c=3;break}if(g.match(h))break;throw Error(d);case 9:if("="==g){i.attrValue="",c=11;break}throw Error(d);case 10:if("]"==g){c=3;break}if(g.match(h))break;throw Error(d);case 11:if(g.match(h))break;if('"'==g||"'"==g){s=g,c=13;break}i.attrValue+=g,c=12;break;case 12:if(g.match(h)){c=10;break}if("]"==g){c=3;break}if("'"==g||'"'==g)throw Error(d);i.attrValue+=g;break;case 13:if(g==s){c=10;break}i.attrValue+=g;break;case 14:if(g.match(h))break;if(","==g){c=1;break}throw Error(d)}}switch(c){case 1:case 2:case 3:case 5:case 14:n();break;default:throw Error(d)}if(!a.length)throw Error(d);return a},e.nextUid=1,e.matchesSelector="function"==typeof(t=document.createElement("div")).webkitMatchesSelector?"webkitMatchesSelector":"function"==typeof t.mozMatchesSelector?"mozMatchesSelector":"function"==typeof t.msMatchesSelector?"msMatchesSelector":"matchesSelector",e}(),v=/^([a-zA-Z:_]+[a-zA-Z0-9_\-:\.]*)$/;function b(e){if("string"!=typeof e)throw Error("Invalid request opion. attribute must be a non-zero length string.");if(!(e=e.trim()))throw Error("Invalid request opion. attribute must be a non-zero length string.");if(!e.match(v))throw Error("Invalid request option. invalid attribute name: "+e);return e}function m(e){if(!e.trim().length)throw Error("Invalid request option: elementAttributes must contain at least one attribute.");for(var t={},r={},i=e.split(/\s+/),a=0;a<i.length;a++){if(n=i[a]){var n,o=(n=b(n)).toLowerCase();if(t[o])throw Error("Invalid request option: observing multiple case variations of the same attribute is not supported.");r[n]=!0,t[o]=!0}}return Object.keys(r)}var y=function(){function e(t){var i=this;this.connected=!1,this.options=e.validateOptions(t),this.observerOptions=e.createObserverOptions(this.options.queries),this.root=this.options.rootNode,this.callback=this.options.callback,this.elementFilter=Array.prototype.concat.apply([],this.options.queries.map((function(e){return e.elementFilter?e.elementFilter:[]}))),this.elementFilter.length||(this.elementFilter=void 0),this.calcReordered=this.options.queries.some((function(e){return e.all})),this.queryValidators=[],e.createQueryValidator&&(this.queryValidators=this.options.queries.map((function(t){return e.createQueryValidator(i.root,t)}))),this.observer=new r((function(e){i.observerCallback(e)})),this.reconnect()}return e.createObserverOptions=function(e){var t,r={childList:!0,subtree:!0};function i(e){r.attributes&&!t||(r.attributes=!0,r.attributeOldValue=!0,e?(t=t||{},e.forEach((function(e){t[e]=!0,t[e.toLowerCase()]=!0}))):t=void 0)}return e.forEach((function(e){if(e.characterData)return r.characterData=!0,void(r.characterDataOldValue=!0);if(e.all)return i(),r.characterData=!0,void(r.characterDataOldValue=!0);if(e.attribute)i([e.attribute.trim()]);else{var t=function(e){var t={};return e.forEach((function(e){e.qualifiers.forEach((function(e){t[e.attrName]=!0}))})),Object.keys(t)}(e.elementFilter).concat(e.attributeList||[]);t.length&&i(t)}})),t&&(r.attributeFilter=Object.keys(t)),r},e.validateOptions=function(t){for(var r in t)if(!(r in e.optionKeys))throw Error("Invalid option: "+r);if("function"!=typeof t.callback)throw Error("Invalid options: callback is required and must be a function");if(!t.queries||!t.queries.length)throw Error("Invalid options: queries must contain at least one query request object.");for(var i={callback:t.callback,rootNode:t.rootNode||document,observeOwnChanges:!!t.observeOwnChanges,oldPreviousSibling:!!t.oldPreviousSibling,queries:[]},a=0;a<t.queries.length;a++){var n=t.queries[a];if(n.all){if(Object.keys(n).length>1)throw Error("Invalid request option. all has no options.");i.queries.push({all:!0})}else if("attribute"in n){if((s={attribute:b(n.attribute)}).elementFilter=g.parseSelectors("*["+s.attribute+"]"),Object.keys(n).length>1)throw Error("Invalid request option. attribute has no options.");i.queries.push(s)}else if("element"in n){var o=Object.keys(n).length,s={element:n.element,elementFilter:g.parseSelectors(n.element)};if(n.hasOwnProperty("elementAttributes")&&(s.attributeList=m(n.elementAttributes),o--),o>1)throw Error("Invalid request option. element only allows elementAttributes option.");i.queries.push(s)}else{if(!n.characterData)throw Error("Invalid request option. Unknown query request.");if(Object.keys(n).length>1)throw Error("Invalid request option. characterData has no options.");i.queries.push({characterData:!0})}}return i},e.prototype.createSummaries=function(e){if(!e||!e.length)return[];for(var t=new d(this.root,e,this.elementFilter,this.calcReordered,this.options.oldPreviousSibling),r=[],i=0;i<this.options.queries.length;i++)r.push(new c(t,this.options.queries[i]));return r},e.prototype.checkpointQueryValidators=function(){this.queryValidators.forEach((function(e){e&&e.recordPreviousState()}))},e.prototype.runQueryValidators=function(e){this.queryValidators.forEach((function(t,r){t&&t.validate(e[r])}))},e.prototype.changesToReport=function(e){return e.some((function(e){if(["added","removed","reordered","reparented","valueChanged","characterDataChanged"].some((function(t){return e[t]&&e[t].length})))return!0;if(e.attributeChanged&&Object.keys(e.attributeChanged).some((function(t){return!!e.attributeChanged[t].length})))return!0;return!1}))},e.prototype.observerCallback=function(e){this.options.observeOwnChanges||this.observer.disconnect();var t=this.createSummaries(e);this.runQueryValidators(t),this.options.observeOwnChanges&&this.checkpointQueryValidators(),this.changesToReport(t)&&this.callback(t),!this.options.observeOwnChanges&&this.connected&&(this.checkpointQueryValidators(),this.observer.observe(this.root,this.observerOptions))},e.prototype.reconnect=function(){if(this.connected)throw Error("Already connected");this.observer.observe(this.root,this.observerOptions),this.connected=!0,this.checkpointQueryValidators()},e.prototype.takeSummaries=function(){if(!this.connected)throw Error("Not connected");var e=this.createSummaries(this.observer.takeRecords());return this.changesToReport(e)?e:void 0},e.prototype.disconnect=function(){var e=this.takeSummaries();return this.observer.disconnect(),this.connected=!1,e},e.NodeMap=n,e.parseElementFilter=g.parseSelectors,e.optionKeys={callback:!0,queries:!0,rootNode:!0,oldPreviousSibling:!0,observeOwnChanges:!0},e}();e.exports=y},function(e,t,r){"use strict";r.r(t);var i=r(0),a=r.n(i),n=(function(){function e(e,t){this.root=e,this.delegate=t,this.idMap={}}e.prototype.initialize=function(e,t){this.idMap[e]=this.root;for(var r=0;r<t.length;r++)this.deserializeNode(t[r],this.root)},e.prototype.applyChanged=function(e,t,r,i){var a=this;t.forEach((function(e){var t=a.deserializeNode(e);a.deserializeNode(e.parentNode),a.deserializeNode(e.previousSibling);t.parentNode&&t.parentNode.removeChild(t)})),e.forEach((function(e){var t=a.deserializeNode(e);t.parentNode&&t.parentNode.removeChild(t)})),t.forEach((function(e){var t=a.deserializeNode(e),r=a.deserializeNode(e.parentNode),i=a.deserializeNode(e.previousSibling);r.insertBefore(t,i?i.nextSibling:r.firstChild)})),r.forEach((function(e){var t=a.deserializeNode(e);Object.keys(e.attributes).forEach((function(r){var i=e.attributes[r];null===i?t.removeAttribute(r):a.delegate&&a.delegate.setAttribute&&a.delegate.setAttribute(t,r,i)||t.setAttribute(r,i)}))})),i.forEach((function(e){a.deserializeNode(e).textContent=e.textContent})),e.forEach((function(e){delete a.idMap[e.id]}))},e.prototype.deserializeNode=function(e,t){var r=this;if(null===e)return null;var i=this.idMap[e.id];if(i)return i;var a=this.root.ownerDocument;switch(null===a&&(a=this.root),e.nodeType){case Node.COMMENT_NODE:i=a.createComment(e.textContent);break;case Node.TEXT_NODE:i=a.createTextNode(e.textContent);break;case Node.DOCUMENT_TYPE_NODE:i=a.implementation.createDocumentType(e.name,e.publicId,e.systemId);break;case Node.ELEMENT_NODE:this.delegate&&this.delegate.createElement&&(i=this.delegate.createElement(e.tagName)),i||(i=a.createElement(e.tagName)),Object.keys(e.attributes).forEach((function(t){r.delegate&&r.delegate.setAttribute&&r.delegate.setAttribute(i,t,e.attributes[t])||i.setAttribute(t,e.attributes[t])}))}if(!i)throw"ouch";if(this.idMap[e.id]=i,t&&t.appendChild(i),e.childNodes)for(var n=0;n<e.childNodes.length;n++)this.deserializeNode(e.childNodes[n],i);return i}}(),function(){function e(e,t,r){var i=this;this.target=e,this.mirror=t,this.nextId=1,this.knownNodes=new a.a.NodeMap;for(var n=this.serializeNode(e).id,o=[],s=e.firstChild;s;s=s.nextSibling)o.push(this.serializeNode(s,!0));this.mirror.initialize(n,o);var h=[{all:!0}];r&&(h=h.concat(r)),this.mutationSummary=new a.a({rootNode:e,callback:function(e){i.applyChanged(e)},queries:h})}return e.prototype.disconnect=function(){this.mutationSummary&&(this.mutationSummary.disconnect(),this.mutationSummary=void 0)},e.prototype.rememberNode=function(e){var t=this.nextId++;return this.knownNodes.set(e,t),t},e.prototype.forgetNode=function(e){this.knownNodes.delete(e)},e.prototype.serializeNode=function(e,t){if(null===e)return null;var r=this.knownNodes.get(e);if(void 0!==r)return{id:r};var i={nodeType:e.nodeType,id:this.rememberNode(e)};switch(i.nodeType){case Node.DOCUMENT_TYPE_NODE:var a=e;i.name=a.name,i.publicId=a.publicId,i.systemId=a.systemId;break;case Node.COMMENT_NODE:case Node.TEXT_NODE:i.textContent=e.textContent;break;case Node.ELEMENT_NODE:var n=e;i.tagName=n.tagName,i.attributes={};for(var o=0;o<n.attributes.length;o++){var s=n.attributes[o];i.attributes[s.name]=s.value}if(t&&n.childNodes.length){i.childNodes=[];for(var h=n.firstChild;h;h=h.nextSibling)i.childNodes.push(this.serializeNode(h,!0))}}return i},e.prototype.serializeAddedAndMoved=function(e,t,r){var i=this,n=e.concat(t).concat(r),o=new a.a.NodeMap;n.forEach((function(e){var t=e.parentNode,r=o.get(t);r||(r=new a.a.NodeMap,o.set(t,r)),r.set(e,!0)}));var s=[];return o.keys().forEach((function(e){for(var t=o.get(e),r=t.keys();r.length;){for(var a=r[0];a.previousSibling&&t.has(a.previousSibling);)a=a.previousSibling;for(;a&&t.has(a);){var n=i.serializeNode(a);n.previousSibling=i.serializeNode(a.previousSibling),n.parentNode=i.serializeNode(a.parentNode),s.push(n),t.delete(a),a=a.nextSibling}r=t.keys()}})),s},e.prototype.serializeAttributeChanges=function(e){var t=this,r=new a.a.NodeMap;return Object.keys(e).forEach((function(i){e[i].forEach((function(e){var a=r.get(e);a||((a=t.serializeNode(e)).attributes={},r.set(e,a)),a.attributes[i]=e.getAttribute(i)}))})),r.keys().map((function(e){return r.get(e)}))},e.prototype.applyChanged=function(e){var t=this,r=e[0],i=r.removed.map((function(e){return t.serializeNode(e)})),a=this.serializeAddedAndMoved(r.added,r.reparented,r.reordered),n=this.serializeAttributeChanges(r.attributeChanged),o=r.characterDataChanged.map((function(e){var r=t.serializeNode(e);return r.textContent=e.textContent,r}));this.mirror.applyChanged(i,a,n,o),r.removed.forEach((function(e){t.forgetNode(e)}))},e}());window.addEventListener("DOMContentLoaded",(function(){console.log("script running");var e=document.getElementById("screen-sharing"),t=document.createElement("p"),r=document.createElement("button"),i=document.createElement("button"),a="off",o=void 0,s=null,h=null,d=!1;function c(e){d&&h.send(JSON.stringify(e))}function l(e){var t=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,r=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;c({x:e.pageX,y:e.pageY,width:t,height:r})}function u(){c({scroll:document.documentElement.scrollTop||document.body.scrollTop})}function f(e){var r;a=e,console.log(a),"off"===a?(console.log("Entering off"),null!=o&&o.close(),o=void 0):((o=new WebSocket("ws://localhost:7000/screenShareClient?hash="+a)).onmessage=function(e){var i=JSON.parse(e.data);console.log(i),"offer"===i.type&&(console.log("Peer Creation"),(s=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"}]})).onicecandidate=function(e){e&&e.candidate?o.send(JSON.stringify({type:"candidate",value:e.candidate})):console.log(e.candidate)},s.setRemoteDescription(new RTCSessionDescription(i.value)),s.createAnswer({offerToReceiveAudio:!1,offerToReceiveVideo:!1}).then((function(e){console.log("Sending Answer"),s.setLocalDescription(e),o.send(JSON.stringify({type:"answer",value:e}))}),null),s.onconnectionstatechange=function(e){"connected"===s.connectionState&&console.log("Peer Connected")},s.ondatachannel=function(e){(h=e.channel).onmessage=function(e){console.log("Message from Agent to Client on Data Channel"),"terminate"==JSON.parse(e.data)&&(console.log("terminate"),d=!1,s.close(),s=null,t.innerHTML="Code for Screen Sharing",f("off")),console.log("Message from Agent to Client on Data Channel")},h.onopen=function(){console.log("Data Channel Opened on Client"),d=!0,c({clear:!0}),c({base:window.location.href.match(/^(.*\/)[^/]*$/)[1]}),r=new n(document,{initialize:function(e,t){c({f:"initialize",args:[e,t]})},applyChanged:function(e,t,r,i){c({f:"applyChanged",args:[e,t,r,i]})}},null),document.addEventListener("mousemove",l),window.addEventListener("scroll",u)},h.onclose=function(){console.log("Data Channel Closed on Client"),d=!1,r.disconnect(),document.removeEventListener("mousemove",l),window.removeEventListener("scroll",u)}}),"candidate"===i.type&&(console.log("Processing ICE"),s.addIceCandidate(new RTCIceCandidate(i.value)))},o.onclose=function(){console.log("Screen Sharing Socket Close"),c({clear:!0}),null!=s&&(s.close(),s=null)})}function p(){if(console.log("start"),"off"===a){var e=Math.floor(899999*Math.random())+1e5,r="http://localhost:4000/screen?hash="+e;console.log(r),t.innerHTML='<a href="'+r+'" target="_blank">'+r+"</a>",f(e.toString())}}function g(){console.log("end"),t.innerHTML="Code for Screen Sharing",f("off"),null!=s&&(h.send(JSON.stringify("terminate")),d=!1,s.close(),s=null)}e.style.position="fixed",e.style.bottom="0%",e.style.right="0%",e.style.opacity="0.9",e.style.borderRadius="10px 30px 0px",e.style.backgroundImage="linear-gradient(120deg, #0a0a68ec, #03031fde)",r.innerText="Start",r.style.padding="5px",r.style.margin="15px",r.style.display="inline-block",r.style.fontSize="12px",t.innerHTML="Code for Screen Sharing",t.style.backgroundColor="white",t.style.padding="5px",t.style.margin="15px",i.innerText="End",i.style.padding="5px",i.style.margin="15px",i.style.display="inline-block",i.style.fontSize="12px",e.appendChild(t),e.appendChild(r),e.appendChild(i),r.addEventListener("click",p),i.addEventListener("click",g)}))}]);